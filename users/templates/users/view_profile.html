{% extends 'base.html' %}

{% load static %}
{% load humanize %}

{% block navbar %}
	{% include 'navbar.html' %}
{% endblock %}

{% block navbarstylesheet %}
  <link rel="stylesheet" href="{% static 'css/navbar.css' %}">
{% endblock %}

{% block stylesheet %}
    <link rel="stylesheet" href="{% static 'css/users/edit_profile.css' %}">
{% endblock %}


{% block content %}

<div class="container">
    <!-- This is to display the warning message -->
    {% for message in messages %}
        <div class="alert alert-danger alert-dismissible">
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
            <strong>Warning!</strong> {{ message }}
          </div>
    {% endfor %} 

    <div class="row gutters p-4">
        {% if user.first_name != None %}
            <div class="mb-3 col-xl-3 col-lg-3 col-md-12 col-sm-12 col-12">
                <div class="card h-100">
                    <div class="card-body">
                        <div class="account-settings">
                            <div class="user-profile">
                                <div class="user-avatar">
                                    <div class="thumb-lg member-thumb mx-auto"><img src="{{ user.profile_image.url }}" class="rounded-circle img-thumbnail" alt="{{ user.first_name }}'s picture"></div>
                                </div>
                                <h5 class="user-name text-nowrap">{{ user.first_name }} {{ user.last_name }}</h5>
                                <h6 class="user-email text-nowrap">{{ user.user.email }}</h6>
                            </div>
                            <div class="bio">
                                <h5>Bio</h5>
                                <p>I'm {{ user.first_name }}; {{ user.bio }}</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-xl-9 col-lg-9 col-md-12 col-sm-12 col-12">
                <div class="card h-100">
                    <div class="card-body">
                        <div class="row gutters">
                            <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">
                                <h4 class="mb-2 text-center text-primary"><b>{{ user.first_name }}'s Details</b></h4>
                            </div>
                            <div class="col-xl-6 col-lg-6 col-md-6 col-sm-6 col-12">
                                <div class="mt-3">
                                    <h4>{{ user.user.username }}</h4>
                                    <p class="mb-0 text-muted">Username</p>
                                </div>
                            </div>
                            <div class="col-xl-6 col-lg-6 col-md-6 col-sm-6 col-12">
                                <div class="mt-3">
                                    <h4>{{ user.user.date_joined.date }}</h4>
                                    <p class="mb-0 text-muted">Date Joined</p>
                                </div>
                            </div>
                        </div>

                        <input type="hidden" name="next" value="{{ request.GET.next }}"/>
                    
                     
                        <div class="mt-4">
                            <div class="row">
                                <div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col-12">
                                    <div class="mt-3">
                                        <h4>{{ user.questions.count }}</h4>
                                        <p class="mb-0 text-muted">Question{{ questions | pluralize }} asked</p>
                                    </div>
                                </div>
                                <div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col-12">
                                    <div class="mt-3">
                                        <h4>{{ user.answers_given.count }}</h4>
                                        <p class="mb-0 text-muted">Question{{ questions | pluralize }} answered</p>
                                    </div>
                                </div>
                                <div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col-12">
                                    <div class="mt-3">
                                        <h4>{{ user.user.last_login }}</h4>
                                        <p class="mb-0 text-muted">Last login</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        {% elif user.first_name == None %}
            <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">
                <div class="card h-100">
                    <div class="card-body">
                        <div class="row gutters">
                            <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">
                                <h4 class="mb-2 text-center text-primary"><b>{{ user.user.username }}'s Details</b></h4>
                            </div>
                            <div class="col-xl-6 col-lg-6 col-md-6 col-sm-6 col-12">
                                <div class="mt-3">
                                    <h4>{{ user.user.username }}</h4>
                                    <p class="mb-0 text-muted">Username</p>
                                </div>
                            </div>
                            <div class="col-xl-6 col-lg-6 col-md-6 col-sm-6 col-12">
                                <div class="mt-3">
                                    <h4>{{ user.user.date_joined.date }}</h4>
                                    <p class="mb-0 text-muted">Date Joined</p>
                                </div>
                            </div>
                        </div>

                        <input type="hidden" name="next" value="{{ request.GET.next }}"/>
                    
                    
                        <div class="mt-4">
                            <div class="row">
                                <div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col-12">
                                    <div class="mt-3">
                                        <h4>{{ user.questions.count }}</h4>
                                        <p class="mb-0 text-muted">Question{{ questions | pluralize }} asked</p>
                                    </div>
                                </div>
                                <div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col-12">
                                    <div class="mt-3">
                                        <h4>{{ user.answers_given.count }}</h4>
                                        <p class="mb-0 text-muted">Question{{ questions | pluralize }} answered</p>
                                    </div>
                                </div>
                                <div class="col-xl-4 col-lg-4 col-md-4 col-sm-4 col-12">
                                    <div class="mt-3">
                                        <h4>{{ user.user.last_login }}</h4>
                                        <p class="mb-0 text-muted">Last login</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        {% endif %}
    </div>
</div>


























{% endblock %}
